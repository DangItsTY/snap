<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<title>Snap!</title>
		<link rel="stylesheet" href="styles/styles.css">
		<link rel="manifest" href="manifest.json">
	</head>
	<body class="mobil">
		<main id="container" class="bg-color">
			<section id="background">
			</section>
			<section id="content">
			</section>
			<section id="foreground">
			</section>
			<section id="overlay">
			</section>
			<section id="info">
			</section>
		</main>
		<footer>
		</footer>
		<script src="scripts/core/config.js"></script>
		<script src="scripts/systems/maker.js"></script>
		<script src="scripts/systems/controls/controls_config.js"></script>
		<script src="scripts/systems/controls/controls.js"></script>
		<script src="scripts/systems/controls/abilities.js"></script>
		<script src="scripts/systems/physics.js"></script>
		<script src="scripts/systems/collision.js"></script>
		<script src="scripts/runs/runClean.js"></script>
		<script src="scripts/runs/runActs.js"></script>
		<script src="scripts/render/render.js"></script>
		<script src="scripts/core/game.js"></script>
		<script>	
			function initialize() {
				for (var i = 0; i < 100; i++) {
					OBJECTS.push(make("basic", {
						randomizePosition: true,
						randomizeVelocity: true,
						randomizeColor: true
					}));
				}
				
				OBJECTS.push(make("point", {
					width: 25,
					height: 25,
					x: 100,
					y: 300
				}));
				
				OBJECTS.push(make("enemy", {
					width: 50,
					height: 50,
					x: 200,
					y: 300
				}));
								
				var newPlayer = make("player", {
					width: 50,
					height: 50,
					x: 351,
					y: 375
				});
				PLAYER = newPlayer;
				OBJECTS.push(newPlayer);
				
				/*
				OBJECTS.push(make("wall", {
					x: GAME_WIDTH / 2,
					y: GAME_HEIGHT - 25
				}));
				*/
				
				/*
				OBJECTS.push(make("wall", {
					x: 500,
					y: GAME_HEIGHT - 25 - 50,
					width: 200,
					height: 50
				}));
				*/
				
				for (var i = 0; i < 41; i++) {
					OBJECTS.push(make("wall", {
						x: i * 50,
						y: GAME_HEIGHT - 50,
						width: 50,
						height: 50
					}));
				}
				
				OBJECTS.push(make("platform", {
					x: 500,
					y: GAME_HEIGHT - 25 - 100,
					width: 200,
					height: 5
				}));
				OBJECTS.push(make("platform", {
					x: 500,
					y: GAME_HEIGHT - 25 - 150,
					width: 200,
					height: 5
				}));
				OBJECTS.push(make("platform", {
					x: 500,
					y: GAME_HEIGHT - 25 - 200,
					width: 200,
					height: 5
				}));
				OBJECTS.push(make("platform", {
					x: 500,
					y: GAME_HEIGHT - 25 - 250,
					width: 200,
					height: 5
				}));
				
				OBJECTS.push(make("item", {
					x: 200,
					y: 300
				}));
				
				var newCamera = make("camera", {});
				OBJECTS.push(newCamera);
				CAMERA = newCamera;
			}
			initialize();
			
			function blankField() {
			}
			
			function preload() {
			}
			preload();
			
			function prerender() {
				renderAttach(OBJECTS);
			}
			prerender();
			
			function log(label, value) {
				var element = document.getElementById(label);
				if (!element) {
					element = document.createElement('div');
					element.id = label;
					INFO_LAYER.appendChild(element);
				}
				element.innerHTML = label + ": " + value;
			}
			
			var lastTimestamp = null;
			var currentTimestamp = null;
			var deltaTime = null;
			var mod = 0;
			function gameloop(timestamp) {
				currentTimestamp = timestamp;
				deltaTime = currentTimestamp - lastTimestamp;
				mod = deltaTime / 1000;
				log("mod", mod);
				lastTimestamp = currentTimestamp;
				game();
				render(OBJECTS);
				//renderHud();
				
				window.requestAnimationFrame(gameloop);
			}
			window.requestAnimationFrame(gameloop);
		</script>
	</body>
</html>